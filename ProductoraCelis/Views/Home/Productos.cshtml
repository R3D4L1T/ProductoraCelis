@model IEnumerable<ProductoraCelis.Models.Producto>
@{
    Layout = null;
}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="~/css/Carrucel.css">
    <link rel="stylesheet" href="~/css/Header.css" />
    <link rel="stylesheet" href="~/css/Footer.css" />
    <link rel="stylesheet" href="~/css/MejoresProductos.css" />
    <link rel="stylesheet" href="~/css/Productos.css" />

    <link rel="stylesheet" href="~/css/site.css" />

<header class="header">
    <img src="~/src/icon/franja.jpg" alt="Franja decorativa" class="franja" />

    <nav class="navbar navbar-expand-md navbar-light bg-light shadow">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" asp-controller="Home" asp-action="Index">
                <img src="~/src/icon/logo.png" alt="Logo" class="me-2" height="30">
                <span class="fw-bold">Productora Celis</span>
            </a>

            <button class="navbar-toggler" type="button"
                    data-bs-toggle="collapse" data-bs-target="#mainNav"
                    aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="mainNav">
                <ul class="navbar-nav me-auto mb-2 mb-md-0">
                    <li class="nav-item">
                        <a class="nav-link active" asp-controller="Home" asp-action="Index">
                            <i class="fas fa-home me-1"></i> Inicio
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Home" asp-action="Productos">Nuestros Productos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Home" asp-action="Salir">Salir</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<body>
    <!-- Submenú de productos -->
    <div class="container my-3">
        <div class="d-flex flex-wrap justify-content-center gap-2">
            <button class="btn btn-outline-primary" onclick="mostrarSeccion('leche')">Leche</button>
            <button class="btn btn-outline-primary" onclick="mostrarSeccion('queso')">Queso</button>
            <button class="btn btn-outline-primary" onclick="mostrarSeccion('yogurt')">Yogurt</button>
            <button class="btn btn-outline-primary" onclick="mostrarSeccion('mantequilla')">Mantequilla</button>
        </div>
    </div>
    <div class="container mt-4 fade-in">
        <form method="post" asp-action="AgregarVariosAlCarrito">
    <!-- Sección Leche -->
    <section id="leche" class="producto" style="display: none;">
        <h2>Leche</h2>
        <div class="combos">
                @for (int i = 0; i < Model.Count(); i++)
                {
                    var producto = Model.ElementAt(i);
                    if (producto.Categoria?.Trim().ToLower() == "leche")
                    {
                        <div class="combo">
                            <img src="@producto.UrlImagen" alt="Imagen del producto" />
                            <p>@producto.Nombre</p>
                            <p>@producto.Descripcion</p>
                            <p>Fp: @producto.FechaProduccion</p>
                            <p>Fv: @producto.FechaVencimiento</p>
                            <p>Stock: @producto.Stock</p>
                                <p>@producto.Precio.ToString("C", new System.Globalization.CultureInfo("es-PE"))</p>

                            <!-- Estos inputs son los que se envían al controlador -->
                            <input type="hidden" name="Items[@i].IdProducto" value="@producto.IdProducto" />
                            <input type="hidden" name="Items[@i].Nombre" value="@producto.Nombre" />
                            <input type="hidden" name="Items[@i].Categoria" value="@producto.Categoria" />
                            <input type="hidden" name="Items[@i].Precio" value="@producto.Precio" />
                            <input type="hidden" name="Items[@i].UrlImagen" value="@producto.UrlImagen" />
                            <input type="number" name="Items[@i].Cantidad" min="0" max="@producto.Stock" value="0" class="form-control mt-2" />
                        </div>
                    }
                }

        </div>
    </section>

    <!-- Sección Queso -->
    <section id="queso" class="producto" style="display: none;">
        <h2>Queso</h2>
        <div class="combos">
                @for (int i = 0; i < Model.Count(); i++)
                {
                    var producto = Model.ElementAt(i);
                    if (producto.Categoria?.Trim().ToLower() == "queso")
                    {
                        <div class="combo">
                            <img src="@producto.UrlImagen" alt="Imagen del producto" />
                            <p>@producto.Nombre</p>
                            <p>@producto.Descripcion</p>
                            <p>Fp: @producto.FechaProduccion</p>
                            <p>Fv: @producto.FechaVencimiento</p>
                            <p>Stock: @producto.Stock</p>
                                <p>@producto.Precio.ToString("C",new System.Globalization.CultureInfo("es-PE"))</p>

                            <!-- Estos inputs son los que se envían al controlador -->
                            <input type="hidden" name="Items[@i].IdProducto" value="@producto.IdProducto" />
                            <input type="hidden" name="Items[@i].Nombre" value="@producto.Nombre" />
                            <input type="hidden" name="Items[@i].Categoria" value="@producto.Categoria" />
                            <input type="hidden" name="Items[@i].Precio" value="@producto.Precio" />
                            <input type="hidden" name="Items[@i].UrlImagen" value="@producto.UrlImagen" />
                            <input type="number" name="Items[@i].Cantidad" min="0" max="@producto.Stock" value="0" class="form-control mt-2" />
                        </div>
                    }
                }

        </div>
    </section>

    <!-- Sección Yogurt -->
        <section id="yogurt" class="producto" style="display: none;">
            <h2>Yogurt</h2>
            <div class="combos">
                @for (int i = 0; i < Model.Count(); i++)
                {
                    var producto = Model.ElementAt(i);
                    if (producto.Categoria?.Trim().ToLower() == "yogurt")
                    {
                        <div class="combo">
                            <img src="@producto.UrlImagen" alt="Imagen del producto" />
                            <p>@producto.Nombre</p>
                            <p>@producto.Descripcion</p>
                            <p>Fp: @producto.FechaProduccion</p>
                            <p>Fv: @producto.FechaVencimiento</p>
                            <p>Stock: @producto.Stock</p>
                                <p>@producto.Precio.ToString("C", new System.Globalization.CultureInfo("es-PE"))</p>

                            <!-- Estos inputs son los que se envían al controlador -->
                            <input type="hidden" name="Items[@i].IdProducto" value="@producto.IdProducto" />
                            <input type="hidden" name="Items[@i].Nombre" value="@producto.Nombre" />
                            <input type="hidden" name="Items[@i].Categoria" value="@producto.Categoria" />
                            <input type="hidden" name="Items[@i].Precio" value="@producto.Precio" />
                            <input type="hidden" name="Items[@i].UrlImagen" value="@producto.UrlImagen" />
                            <input type="number" name="Items[@i].Cantidad" min="0" max="@producto.Stock" value="0" class="form-control mt-2" />
                        </div>
                    }
                }

            </div>
        </section>


    <!-- Sección Mantequilla -->
    <section id="mantequilla" class="producto" style="display: none;">
        <h2>Mantequilla</h2>
        <div class="combos">
                @for (int i = 0; i < Model.Count(); i++)
                {
                    var producto = Model.ElementAt(i);
                    if (producto.Categoria?.Trim().ToLower() == "mantequilla")
                    {
                        <div class="combo">
                            <img src="@producto.UrlImagen" alt="Imagen del producto" />
                            <p>@producto.Nombre</p>
                            <p>@producto.Descripcion</p>
                            <p>Fp: @producto.FechaProduccion<p/>
                            <p>Fv: @producto.FechaVencimiento</p>
                            <p>Stock: @producto.Stock</p>
                                <p>@producto.Precio.ToString("C", new System.Globalization.CultureInfo("es-PE"))</p>

                            <!-- Estos inputs son los que se envían al controlador -->
                            <input type="hidden" name="Items[@i].IdProducto" value="@producto.IdProducto" />
                            <input type="hidden" name="Items[@i].Nombre" value="@producto.Nombre" />
                            <input type="hidden" name="Items[@i].Categoria" value="@producto.Categoria" />
                            <input type="hidden" name="Items[@i].Precio" value="@producto.Precio" />
                            <input type="hidden" name="Items[@i].UrlImagen" value="@producto.UrlImagen" />
                            <input type="number" name="Items[@i].Cantidad" min="0" max="@producto.Stock" value="0" class="form-control mt-2" />
                        </div>
                    }
                }

        </div>
    </section>
            <div class="d-flex justify-content-center mt-4">
                <button type="submit" class="btn btn-success px-4 py-2">
                    Agregar seleccionados al carrito
                </button>
            </div>
    </form>

</div>

<script>
    function mostrarSeccion(id) {
        const secciones = document.querySelectorAll('.producto');
        secciones.forEach(seccion => seccion.style.display = 'none');

        const seccionSeleccionada = document.getElementById(id);
        if (seccionSeleccionada) {
            seccionSeleccionada.style.display = 'block';
        }
    }
</script>
<script src="~/js/Header.js"></script>
<script src="~/js/Carrucel.js"></script>
<script src="~/js/MejoresProductos.js"></script>
<script src="~/js/Productos.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


    <!-- Bootstrap JS (opcional si ya lo tienes con los archivos locales) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Widget de accesibilidad UserWay -->
    <script src="https://cdn.userway.org/widget.js" data-account="2CI6j9fC2f"></script>
</body>

